{"version":3,"sources":["webpack:///./src/views/Role.vue?9f4d","webpack:///./src/views/Role.vue","webpack:///src/views/Role.vue","webpack:///./src/views/Role.vue?303c","webpack:///./src/views/Role.vue?652d"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","model","value","name","callback","$$v","expression","description","staticClass","on","$event","load","_v","reset","handleAdd","delbath","handleExcelImportSuccess","exp","tableData","headerBg","handleSelectionChange","scopedSlots","_u","key","fn","scope","handleMenu","row","id","handleEdit","handleDelete","pageNum","pageSize","total","handleSizeChange","handleCurrentChange","dialogFormVisible","form","$set","flag","slot","handleCancel","save","dialogMenuVisible","ref","props","menuData","expendeds","checks","node","data","class","icon","_s","saveRoleMenu","staticRenderFns","multipleSelection","label","roleId","roleFlag","ids","created","methods","request","get","params","then","res","records","console","log","post","$message","success","$refs","tree","getCheckedKeys","code","error","msg","map","v","$confirm","confirmButtonText","cancelButtonText","type","delete","message","catch","val","window","open","component"],"mappings":"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","file":"js/about10.cc61a1db.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=c460054a&prod&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticStyle:{\"margin\":\"10px 0\"}},[_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请输入角色名称\",\"suffix-icon\":\"el-icon-search\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请输入描述\",\"suffix-icon\":\"el-icon-message\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}}),_c('el-button',{staticClass:\"ml-5\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.load()}}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.reset()}}},[_vm._v(\"重置\")])],1),_c('div',{staticStyle:{\"margin\":\"10px 0\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleAdd()}}},[_vm._v(\"新增\"),_c('i',{staticClass:\"el-icon-circle-plus-outline\",staticStyle:{\"margin-left\":\"5px\"}})]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.delbath()}}},[_vm._v(\"批量删除\"),_c('i',{staticClass:\"el-icon-remove\",staticStyle:{\"margin-left\":\"5px\"}})]),_c('el-upload',{staticClass:\"upload-demo ml-10\",staticStyle:{\"display\":\"inline-block\"},attrs:{\"action\":\"http://localhost:9090/role/import\",\"show-file-list\":false,\"accept\":\".xlsx\",\"on-success\":_vm.handleExcelImportSuccess}},[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\" 导入\"),_c('i',{staticClass:\"el-icon-bottom\",staticStyle:{\"margin-left\":\"5px\"}})])],1),_c('el-button',{staticClass:\"ml-10\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.exp()}}},[_vm._v(\"导出\"),_c('i',{staticClass:\"el-icon-top\",staticStyle:{\"margin-left\":\"5px\"}})])],1),_c('el-table',{attrs:{\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\",\"header-cell-class-name\":_vm.headerBg},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"flag\",\"label\":\"唯一标识\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"描述\"}}),_c('el-table-column',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"label\":\"操作\",\"width\":\"280\",\"min-width\":\"83px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.handleMenu(scope.row.id)}}},[_vm._v(\"分配菜单\"),_c('i',{staticClass:\"el-icon-menu\",staticStyle:{\"margin-left\":\"3px\"}})]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\"编辑\"),_c('i',{staticClass:\"el-icon-edit\",staticStyle:{\"margin-left\":\"3px\"}})]),_c('el-button',{staticStyle:{\"margin-left\":\"0\"},attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row.id)}}},[_vm._v(\"删除\"),_c('i',{staticClass:\"el-icon-remove\",staticStyle:{\"margin-left\":\"3px\"}})])]}}])})],1),_c('div',{staticStyle:{\"padding\":\"10px 0\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.pageNum,\"page-sizes\":[2, 5, 10, 20],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"角色信息\",\"visible\":_vm.dialogFormVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form,\"label-width\":\"80px\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"唯一标识\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.flag),callback:function ($$v) {_vm.$set(_vm.form, \"flag\", $$v)},expression:\"form.flag\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.handleCancel()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"菜单分配\",\"visible\":_vm.dialogMenuVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogMenuVisible=$event}}},[_c('el-tree',{ref:\"tree\",attrs:{\"props\":_vm.props,\"data\":_vm.menuData,\"show-chekBox\":\"\",\"check-strictly\":true,\"default-expanded-keys\":_vm.expendeds,\"default-checked-keys\":_vm.checks,\"node-key\":\"id\",\"show-checkbox\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ node, data }){return _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_c('i',{class:data.icon}),_vm._v(\" \"+_vm._s(data.name))])])}}])}),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.handleCancel()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveRoleMenu()}}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n\r\n    <div style=\"margin: 10px 0\">\r\n      <el-input style=\"width: 200px \" placeholder=\"请输入角色名称\" suffix-icon=\"el-icon-search\"\r\n                v-model=\"name\"></el-input>\r\n      <el-input style=\"width: 200px \" placeholder=\"请输入描述\" suffix-icon=\"el-icon-message\"\r\n                v-model=\"description\"></el-input>\r\n      <el-button class=\"ml-5\" type=\"primary\" @click=\"load()\">搜索</el-button>\r\n      <el-button type=\"primary\" @click=\"reset()\">重置</el-button>\r\n    </div>\r\n    <div style=\"margin: 10px 0;\">\r\n      <el-button type=\"primary\" @click=\"handleAdd()\">新增<i class=\"el-icon-circle-plus-outline\"\r\n                                                          style=\"margin-left: 5px\"></i></el-button>\r\n      <el-button type=\"danger\" @click=\"delbath()\">批量删除<i class=\"el-icon-remove\" style=\"margin-left: 5px\"></i>\r\n      </el-button>\r\n      <el-upload\r\n          class=\"upload-demo ml-10\"\r\n          action=\"http://localhost:9090/role/import\" :show-file-list=\"false\" accept=\".xlsx\" :on-success=\"handleExcelImportSuccess\" style=\"display: inline-block;\">\r\n        <el-button type=\"primary\" > 导入<i class=\"el-icon-bottom\" style=\"margin-left: 5px\"></i>\r\n        </el-button>\r\n      </el-upload>\r\n      <el-button type=\"primary\" @click=\"exp()\" class=\"ml-10\">导出<i class=\"el-icon-top\" style=\"margin-left: 5px\"></i></el-button>\r\n    </div>\r\n    <el-table :data=\"tableData\" border stripe :header-cell-class-name=\"headerBg\"\r\n              @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"名称\" ></el-table-column>\r\n      <el-table-column prop=\"flag\" label=\"唯一标识\" ></el-table-column>\r\n      <el-table-column prop=\"description\" label=\"描述\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"280\" v-slot=\"scope\" min-width=\"83px\"  style=\"  display:inline-block;\" >\r\n        <el-button type=\"info\" @click=\"handleMenu(scope.row.id)\">分配菜单<i class=\"el-icon-menu\" style=\"margin-left: 3px\"></i></el-button>\r\n        <el-button type=\"success\" @click=\"handleEdit(scope.row)\">编辑<i class=\"el-icon-edit\" style=\"margin-left: 3px\"></i></el-button>\r\n        <el-button type=\"danger\" @click=\"handleDelete(scope.row.id)\" style=\"margin-left: 0\">删除<i class=\"el-icon-remove\" style=\"margin-left: 3px\"></i></el-button>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div style=\"padding: 10px 0\">\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"pageNum\"\r\n          :page-sizes=\"[2, 5, 10, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n\r\n      </el-pagination>\r\n    </div>\r\n    <el-dialog title=\"角色信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\">\r\n      <el-form :model=\"form\" label-width=\"80px\" size=\"small\">\r\n        <el-form-item label=\"名称\">\r\n          <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"唯一标识\">\r\n          <el-input v-model=\"form.flag\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\">\r\n          <el-input v-model=\"form.description\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleCancel()\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"save()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"菜单分配\" :visible.sync=\"dialogMenuVisible\" width=\"30%\">\r\n      <el-tree\r\n          :props=\"props\"\r\n          :data=\"menuData\"\r\n          show-chekBox\r\n          :check-strictly=\"true\"\r\n          :default-expanded-keys= expendeds\r\n          :default-checked-keys= checks\r\n          node-key=\"id\"\r\n          ref=\"tree\"\r\n          show-checkbox\r\n         >\r\n           <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n             <span> <i :class=\"data.icon\"></i> {{ data.name }}</span>\r\n           </span>\r\n      </el-tree>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleCancel()\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveRoleMenu()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Role\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      total: 0,\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      name: \"\",\r\n      description: \"\",\r\n      dialogFormVisible: false,\r\n      dialogMenuVisible:false,\r\n      form: {},\r\n      multipleSelection: [],\r\n      headerBg: 'headerBg',\r\n      menuData:[],\r\n      props: {\r\n        label: 'name',\r\n      },\r\n      roleId: 0,\r\n      expendeds:[],\r\n      checks:[],\r\n      roleFlag: '',\r\n      ids: []\r\n    }\r\n  },\r\n  created() {//页面创建之后\r\n    //请求分页查询数据\r\n    this.load()\r\n  },\r\n  methods: {\r\n    load() {\r\n      this.request.get(\"/role/page\", {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          name: this.name,\r\n          description: this.description,\r\n        }\r\n      }).then(res => {\r\n        this.tableData = res.records\r\n        this.total = res.total\r\n        console.log(\"获取数据结束\")\r\n      })\r\n\r\n\r\n\r\n    },\r\n    handleSizeChange(pageSize) {\r\n      console.log(pageSize)\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum) {\r\n      console.log(pageNum)\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n    reset() {\r\n      this.name = \"\"\r\n      this.description = \"\"\r\n      this.load()\r\n    },\r\n    handleAdd() {\r\n      this.dialogFormVisible = true\r\n      this.form = {}\r\n    },\r\n    save() {\r\n      this.request.post(\"/role\", this.form).then(res => {\r\n        if (res) {\r\n          this.$message.success(\"保存成功\")\r\n          this.dialogFormVisible = false\r\n          this.load()\r\n        } else {\r\n          this.$message.success(\"保存失败\")\r\n        }\r\n      })\r\n    },\r\n    saveRoleMenu(){\r\n      this.request.post(\"/role/roleMenu/\"+this.roleId,this.$refs.tree.getCheckedKeys()).then(res => {\r\n        if (res.code == '200'){\r\n          this.$message.success(\"绑定成功\")\r\n          this.dialogMenuVisible = false\r\n\r\n\r\n        }else {\r\n          this.$message.error(res.msg)\r\n        }\r\n        console.log(res)\r\n      })\r\n    },\r\n    handleEdit(row) {\r\n      this.form = row\r\n      console.log(\"this.form==>\" + this.form)\r\n      this.dialogFormVisible = true\r\n    },\r\n    handleMenu(roleId) {\r\n      this.roleId = roleId\r\n      this.dialogMenuVisible = true\r\n      this.request.get(\"/menu\").then(res => {\r\n        // console.log(\"res.data==>\"+JSON.stringify(res.data))\r\n        this.menuData = res.data\r\n        this.expendeds = this.menuData.map(v => v.id)\r\n      })\r\n\r\n      this.request.get(\"/role/roleMenu/\" +roleId ).then(res => {\r\n        // console.log(\"进入请求\")\r\n        this.checks = res.data\r\n      })\r\n    },\r\n    handleCancel() {\r\n      this.dialogFormVisible = false\r\n      this.load()\r\n    },\r\n    handleDelete(id) {\r\n      this.$confirm('此操作将永久删除该用户信息, 是否继续?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.request.delete(\"/role/\" + id).then(res => {\r\n          console.log(\"delRes==>\" + res)\r\n          this.load()\r\n        })\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        })\r\n      })\r\n          .catch(() => {\r\n            this.$message({\r\n              type: 'info',\r\n              message: '已取消删除'\r\n            });\r\n          });\r\n    },\r\n    handleSelectionChange(val) {\r\n      console.log(val)\r\n      this.multipleSelection = val\r\n    },\r\n    delbath() {\r\n      this.$confirm('此操作将永久删除该用户信息, 是否继续?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        let ids = this.multipleSelection.map(v => v.id)\r\n        this.request.post(\"/role/del/batch\", ids).then(res => {\r\n          console.log(\"delRes==>\" + res)\r\n          if (res == true) {\r\n            this.$message({\r\n              type: 'success',\r\n              message: '删除成功!',\r\n            })\r\n            this.load()\r\n          } else {\r\n            this.$message({\r\n              type: 'info',\r\n              message: '请至少选择一个用户进行删除'\r\n            })\r\n          }\r\n\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    },\r\n\r\n    //导入用户信息成功提示\r\n    handleExcelImportSuccess(){\r\n      this.$message.success(\"用户信息上传成功!\")\r\n      this.load()\r\n    },\r\n    //导出用户信息\r\n    exp() {\r\n      window.open(\"http://localhost:9090/role/export\")\r\n    },\r\n  }\r\n}\r\n\r\n</script>\r\n<style>\r\n.headerBg {\r\n  background-color: #eee !important;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=c460054a&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role.vue?vue&type=style&index=0&id=c460054a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}